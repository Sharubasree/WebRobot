<html>
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="static\control.css">
<title>Testing</title>
</head>
<body>
<!--NAVBAR-->
<nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-dark">
<div class="container-fluid">
<a class="navbar-brand" href="#">
    <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35"fill="white"
    class="bi bi-cpu-fill" viewBox="0 0 16 16">
    <path d="M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5ZM3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.58 26.58 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.933.933 0 0 1-.765.935c-.845.147-2.34.346-4.235.346-1.895 0-3.39-.2-4.235-.346A.933.933 0 0 1 3 9.219V8.062Zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a24.767 24.767 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25.286 25.286 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135Z"/>
  <path d="M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2V1.866ZM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5Z"/>
    </svg>
<img src="">
<span style="font-size: 25px;">WebRobot</span></a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarSupportedContent">
<ul class="navbar-nav me-auto mb-1 mb-lg-0">
<li class="nav-item">
<a class="nav-link" aria-current="page" href="/" style="font-size: 20px; margin-left: 1.2em;">Home</a>
</li>

<li class="nav-item">
<a class="nav-link" aria-current="page" href="{{url_for('register')}}"
style="font-size: 20px; margin-left: 1.2em;">Register</a>
</li>
<li class="nav-item">
<a class="nav-link" aria-current="page" href="{{url_for('login')}}"
style="font-size: 20px; margin-left: 1.2em;">Login</a>
</li>

<li class="nav-item">
<a class="nav-link active" aria-current="page" href="{{url_for('logout')}}"
style="font-size: 20px; margin-left: 1.2em;">Logout</a>
style="font-size: 20px; margin-left: 1.2em;">Logout</a>
</li>
<li class="nav-item" style="margin-left: 75%;">
<img src="static\test.jpg" height="45px" width="45px" style="border-radius: 50%;">
</li>
<li class="nav-item" style="margin-left: 2%;">
<h1 style="color: white; font-size: 25px; margin-top: 5px">{{ current_user.username }}</h1>
</li>
</ul>
</div>
</div>
</nav>
<br>
<br>
<!--CONTROL PAD AND SENSOR DATA DISPLAY-->
<div class="container">
<div class="row">
<div class="col">
<div class="camera">
<h2 style="color: white; text-align: center">Live RasPi Camera Feed</h2>
<img src="{{ url_for('video_feed') }}" height="450px" width="700px">
</div>
</div>
<div class="col">
<div class="sensor">
<h2 style="text-align: center;">IR-Sensor Status</h2>
<span>IR Left Sensor :</span>
<h4>
<div id='test1'></div>
</h4>
<span>IR Center Sensor :</span>
<h4>
<div id='test2'></div>
</h4>
<span>IR Right Sensor :</span>
<h4>
<div id='test3'></div>
</h4>
</div>
<div class="control">
<h2 style="text-align: center;">Controller</h2>
<form>
<div class="container">
<div class="row">
<div class="col">
<a href="left" id="left"><button style="margin-top: 86.5%;">LEFT</button></a>
</div>
<div class="col">
<a href="forward" id="forward"><button>FORWARD</button></a>
<br>
<a href="backward" id="backward"><button>BACKWARD</button></a>
</div>
<div class="col">
<a href="right" id="right"><button style="margin-top: 86.5%;">RIGHT</button></a>
</div>
</div>
</div>
</form>
</div>
</div>
</div>
</div>
<!--SERVO CONTROLLER-->
<div id="slidecontainer">
<h3 style="color: white;">Camera Angle</h3>
<input type="range" min="1" max="12.5" value="1" id="range1">
<p style="color: white;">Value : <span id="range1_value"></span></p>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<!--AJAX SCRIPT-->
<script>
document.addEventListener("DOMContentLoaded", function (event) {
    const getSensorReading = function () {
fetch(`http://0.0.0.0:8000/update`) // send request to route /update
.then((resp) => resp.json())
.then(function (response) {
document.getElementById('test1').innerHTML = response.data1;
document.getElementById('test2').innerHTML = response.data2;
document.getElementById('test3').innerHTML = response.data3;
});
}
getSensorReading();
setInterval(getSensorReading, 100); //request for update every 1 second
});
$(function () {
$('a#forward').on('mousedown', function (e) {
e.preventDefault()
$.getJSON('/forward',
function (data) {
//do nothing
});
return false;
});
});
$(function () {
$('a#forward').on('mouseup', function (e) {
e.preventDefault()
$.getJSON('/stop',
function (data) {
//do nothing
});
return false;
});
});
$(function () {
$('a#backward').on('mousedown', function (e) {
e.preventDefault()
$.getJSON('/backward',
function (data) {
//do nothing
});
return false;
});
});
$(function () {
$('a#backward').on('mouseup', function (e) {
e.preventDefault()
$.getJSON('/stop',
function (data) {
//do nothing
});
return false;
});
});
$(function () {
$('a#left').on('mousedown', function (e) {
e.preventDefault()
$.getJSON('/left',
function (data) {
//do nothing
});
return false;
});
});
$(function () {
$('a#left').on('mouseup', function (e) {
e.preventDefault()
$.getJSON('/stop',
function (data) {
//do nothing
});
return false;
});
});
$(function () {
$('a#right').on('mousedown', function (e) {
e.preventDefault()
$.getJSON('/right',
function (data) {
//do nothing
});
return false;
});
});
$(function () {
$('a#right').on('mouseup', function (e) {
e.preventDefault()
$.getJSON('/stop',
function (data) {
//do nothing
});
return false;
});
});
var slider = document.getElementById("range1");
var output = document.getElementById("range1_value");
slider.oninput = function () {
output.innerHTML = slider.value;
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function () {
if (this.readyState == 4 && this.status == 200) {
}
};
xhttp.open("GET", "http://0.0.0.0:8000/set_speed?speed=" + slider.value, true);
xhttp.send();
}
</script>
</body>
</html>
